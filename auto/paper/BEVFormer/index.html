
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="ffx">
      
      
        <link rel="canonical" href="https://ffuxiang.gitee.io/auto/paper/BEVFormer/">
      
      
        <link rel="prev" href="../HADAR/">
      
      
        <link rel="next" href="../../../transformer/DeDETR/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>BEVFormer - ffx的个人博客</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.fad675c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bevformer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ffx的个人博客" class="md-header__button md-logo" aria-label="ffx的个人博客" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ffx的个人博客
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              BEVFormer
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://ffuxiang.gitee.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Ffuxiang
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ffx的个人博客" class="md-nav__button md-logo" aria-label="ffx的个人博客" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ffx的个人博客
  </label>
  
    <div class="md-nav__source">
      <a href="https://ffuxiang.gitee.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Ffuxiang
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resume/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    个人简历
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../fined_domain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    细粒度/域适应笔记
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    目标检测
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            目标检测
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/detection_sum/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    目标检测汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    关键概念
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            关键概念
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/concept/anchor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锚点
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/concept/regression/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    回归参数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/concept/IoU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IoU
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    通用程序
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            通用程序
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1" >
        
          
          <label class="md-nav__link" for="__nav_4_3_1" id="__nav_4_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据增强
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1">
            <span class="md-nav__icon md-icon"></span>
            数据增强
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/program/data_augment/affine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    仿射变换
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/program/data_augment/mosaic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mosaic增强
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/program/anchor_gen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锚点生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/program/anchor_match/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锚点匹配
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/program/regression/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    参数编码解码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/program/IoU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算IoU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/program/train/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    训练程序
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    检测网络
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            检测网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_4_1" id="__nav_4_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Faster R-CNN
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_1">
            <span class="md-nav__icon md-icon"></span>
            Faster R-CNN
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/network/Faster_RCNN/structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络结构
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/network/Faster_RCNN/RPN/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RPN模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/network/Faster_RCNN/ROI_Head/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROI Head模块
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/network/RetinaNet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RetinaNet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_4_3" id="__nav_4_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    YOLO系列
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_3">
            <span class="md-nav__icon md-icon"></span>
            YOLO系列
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/network/YOLO/YOLOv3_SPP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YOLOv3-SPP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/network/YOLO/YOLOv4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YOLOv4
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/DETR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DETR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/DeDETR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deformable DETR
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    常用模块
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            常用模块
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/module/FPN/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FPN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/module/FL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../detection/module/NL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NL
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    自动驾驶
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            自动驾驶
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" checked>
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    论文笔记
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            论文笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HADAR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HADAR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    BEVFormer
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    BEVFormer
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      综述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      主要思想
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      方法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="方法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bev" class="md-nav__link">
    <span class="md-ellipsis">
      BEV查询向量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      空间交叉注意力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      时间自注意力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bev_1" class="md-nav__link">
    <span class="md-ellipsis">
      BEV特征的应用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      实验
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实验">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      可视化图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      源码笔记
    </span>
  </a>
  
    <nav class="md-nav" aria-label="源码笔记">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/DeDETR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deformable DETR
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PCV/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    点云可视化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PCC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    点云与图像映射
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    视觉SLAM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            视觉SLAM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SLAM/SLAM_ch3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    三维空间刚体运动
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    transformer系列
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            transformer系列
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/transformer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transformer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/ViT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ViT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/Swin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Swin Transformer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/DETR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DETR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/DeDETR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deformable DETR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/Maskformer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maskformer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/ViT_Adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ViT Adapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/DINO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DINO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transformer/CLIP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLIP及相关改进工作
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    强化学习
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            强化学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../RL/DQN/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DQN算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../RL/AC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AC算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../RL/PPO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PPO算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../RL/DDPG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DDPG算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../RL/landing_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    《RL落地指南》笔记
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    图像增强
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            图像增强
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" >
        
          
          <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    HDR
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            HDR
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../img_enhance/HDR/HDR-Transformer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDT-Transformer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    扩散模型
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            扩散模型
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../img_enhance/DDPM/DDPM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DDPM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../img_enhance/DDPM/GDP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GDP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据集
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            数据集
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../img_enhance/dataset/deraining/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    去雨
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../img_enhance/dataset/HDR_dataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDR
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4" id="__nav_8_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    评测指标
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4">
            <span class="md-nav__icon md-icon"></span>
            评测指标
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../img_enhance/matrix/PSNR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PSNR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../img_enhance/matrix/SSIM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSIM
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其他论文
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            其他论文
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../other_paper/PartialConv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    局部卷积
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../other_paper/attention/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    注意力机制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../other_paper/Cycle_GAN/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cycle GAN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../other_paper/saliency_sampling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    显著性采样
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../other_paper/GradCAM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grad-CAM
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PyTorch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            PyTorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/sum_pytorch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyTorch学习笔记汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2" >
        
          
          <label class="md-nav__link" for="__nav_10_2" id="__nav_10_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    nn方法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_2">
            <span class="md-nav__icon md-icon"></span>
            nn方法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2_1" >
        
          
          <label class="md-nav__link" for="__nav_10_2_1" id="__nav_10_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    网络结构
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_2_1">
            <span class="md-nav__icon md-icon"></span>
            网络结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/layers/nn.Linear/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.Linear
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/layers/nn.Conv2d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.Conv2d
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/layers/nn.BatchNorm2d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.BatchNorm2d
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/layers/nn.AvgPool2d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.AvgPool2d
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/layers/nn.AdaptiveAvgPool2d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.AdaptiveAvgPool2d
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/layers/nn.Dropout/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.Dropout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/layers/nn.MultiheadAttention/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.MultiheadAttention
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/layers/nn.Embedding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.Embedding
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2_2" >
        
          
          <label class="md-nav__link" for="__nav_10_2_2" id="__nav_10_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    激活函数
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_2_2">
            <span class="md-nav__icon md-icon"></span>
            激活函数
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/activations/nn.ReLU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.ReLU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/activations/nn.LeakyReLU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.LeakyReLU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/activations/nn.PReLU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.PReLU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/activations/nn.Sigmoid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.Sigmoid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/activations/nn.Tanh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.Tanh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/activations/nn.GELU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.GeLU
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2_3" >
        
          
          <label class="md-nav__link" for="__nav_10_2_3" id="__nav_10_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    损失函数
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_2_3">
            <span class="md-nav__icon md-icon"></span>
            损失函数
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/loss_functions/nn.L1Loss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.L1Loss
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/loss_functions/nn.MSELoss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.MSELoss
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/loss_functions/nn.CrossEntropyLoss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.CrossEntropyLoss
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/loss_functions/nn.KLDivLoss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.KLDivLoss
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/loss_functions/nn.MarginRankingLoss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.MarginRankingLoss
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/loss_functions/nn.SmoothL1Loss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.SmoothL1Loss
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/loss_functions/nn.TripletMarginLoss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nn.TripletMarginLoss
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2_4" >
        
          
          <label class="md-nav__link" for="__nav_10_2_4" id="__nav_10_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    nn.functional方法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_2_4">
            <span class="md-nav__icon md-icon"></span>
            nn.functional方法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/F/F.interpolate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    F.interpolate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/nn/F/F.normalize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    F.normalize
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_3" >
        
          
          <label class="md-nav__link" for="__nav_10_3" id="__nav_10_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    utils.data方法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_3">
            <span class="md-nav__icon md-icon"></span>
            utils.data方法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/data/data.RandomSampler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    data.RandomSampler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/data/data.WeightedRandomSampler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    data.WeightedRandomSampler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/data/data.BatchSampler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    data.BatchSampler
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_4" >
        
          
          <label class="md-nav__link" for="__nav_10_4" id="__nav_10_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    optim方法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_4">
            <span class="md-nav__icon md-icon"></span>
            optim方法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/optim/LambdaLR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LambdaLR
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_5" >
        
          
          <label class="md-nav__link" for="__nav_10_5" id="__nav_10_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    torch方法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_5">
            <span class="md-nav__icon md-icon"></span>
            torch方法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.cat_torch.stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.cat与torch.stack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.chunk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.chunk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.clamp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.clamp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.div/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.div
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.ge_gt_le_lt_ne_eq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.ge_gt_le_lt_ne_eq
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.from_numpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.from_numpy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.gather/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.gather
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.index_select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.index_select
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.max/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.max
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.mul/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.mul
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.nonzero/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.nonzero
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.repeat_interleave_tensor.repeat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.repeat_interleave与tensor.repeat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.squeeze_torch.unsqueeze/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.squeeze与torch.unsqueeze
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.transpose_tensor.permute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.transpose与tensor.permute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/torch/torch.where/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    torch.where
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_6" >
        
          
          <label class="md-nav__link" for="__nav_10_6" id="__nav_10_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其他方法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_6">
            <span class="md-nav__icon md-icon"></span>
            其他方法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/other_method/hook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hook模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/other_method/train_eval/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    train与eval
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/other_method/cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cuda方法
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PyTorch/question/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    常用Python库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            常用Python库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/tqdm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tqdm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/rearrange/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rearrange
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    LaTeX
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            LaTeX
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../LaTeX/symbol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    特殊符号
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_1" >
        
          
          <label class="md-nav__link" for="__nav_13_1" id="__nav_13_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux常用指令
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_1">
            <span class="md-nav__icon md-icon"></span>
            Linux常用指令
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/instruct/conda_pip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    conda pip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/instruct/bypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bypy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/instruct/screen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    screen命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/instruct/apt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apt命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/instruct/PID/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    查看进程信息
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_2" >
        
          
          <label class="md-nav__link" for="__nav_13_2" id="__nav_13_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    报错记录
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_2">
            <span class="md-nav__icon md-icon"></span>
            报错记录
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/error/sum_error/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_2_2" >
        
          
          <label class="md-nav__link" for="__nav_13_2_2" id="__nav_13_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    系统相关
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_13_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_2_2">
            <span class="md-nav__icon md-icon"></span>
            系统相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/error/linux1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Failed CC version
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_2_3" >
        
          
          <label class="md-nav__link" for="__nav_13_2_3" id="__nav_13_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NVIDIA
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_13_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_2_3">
            <span class="md-nav__icon md-icon"></span>
            NVIDIA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/error/nvidia/nvidia1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NVIDIA-SMI has failed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux/error/nvidia/nvidia2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NVIDIA kernel module already loaded
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其他
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            其他
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/email/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    邮件模板
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/website/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网站汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../other/program/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常用程序
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      综述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      主要思想
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      方法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="方法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bev" class="md-nav__link">
    <span class="md-ellipsis">
      BEV查询向量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      空间交叉注意力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      时间自注意力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bev_1" class="md-nav__link">
    <span class="md-ellipsis">
      BEV特征的应用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      实验
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实验">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      可视化图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      源码笔记
    </span>
  </a>
  
    <nav class="md-nav" aria-label="源码笔记">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="bevformer">BEVFormer——论文笔记<a class="headerlink" href="#bevformer" title="Permanent link">&para;</a></h1>
<h2 id="_1">综述<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>会议时间：ECCV 2022</p>
<p>论文地址：<a href="https://arxiv.org/pdf/2203.17270v2.pdf">https://arxiv.org/pdf/2203.17270v2.pdf</a></p>
<p>源码地址：<a href="https://github.com/fundamentalvision/BEVFormer">https://github.com/fundamentalvision/BEVFormer</a></p>
</blockquote>
<h2 id="_2">主要思想<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>&emsp;&emsp;<strong>3D空间感知</strong>对于自动驾驶、机器人等各种应用至关重要，尽管对于激光雷达的方法取得了显著的进展，可以很好地用于感知物体的深度信息，但是<strong>相机</strong>在感知任务中所承担的角色同样也很重要，因为其<strong>部署成本低</strong>，并且相机捕获的图片可以用于<strong>检测远距离物体</strong>、<strong>识别基于视觉的道路元素</strong>（例如交通信号灯、停车线）等等。在自动驾驶任务中，常见的做法是从多个摄像头给出的二维图像来感知现实的三维世界，从而完成3D目标检测或者地图分割等任务，这类算法设计过程最重要的就是要<strong>考虑如何实现跨相机的信息交互，从多个相机提取整体的特征表示</strong>，随着Transformer、注意力机制在视觉上的普及应用，这一过程逐渐可以被很好地实现。</p>
<p>&emsp;&emsp;鸟瞰图（bird-eye-view, BEV）是一种常用于周围场景表示的方法，因为他可以清晰地呈现物体的位置和规模，适用于各种自动驾驶任务，虽然以前的地图分割方法证明了BEV的有效性，但是基于BEV的方法在3D目标检测中并不能体现很好地检测性能，根本原因就是<strong>难以准确地实现从2D平面到BEV特征的映射</strong>，即无法很好地解决跨相机信息交互的问题，无法生成准确的BEV特征。还有一种方法就是基于深度信息来生成BEV特征，这类方法对于深度数值和深度分布的准确性很敏感，BEV的特征表示容易受到复合误差的影响（原文直接翻译的）。不准确的的BEV特征会严重影响下游任务的性能。由于Transformer中使用了注意力机制，可以<strong>动态地聚合有价值的特征</strong>，因此作者基于TF模块设计了一款不依赖深度信息的BEV特征生成算法，可以自适应学习BEV特征。</p>
<blockquote>
<p>这里提到的复合误差指的是什么？</p>
</blockquote>
<p>&emsp;&emsp;<strong>BEV特征是连接时间和空间的理想桥梁</strong>，这也是自动驾驶任务中使用BEV特征执行感知任务的另一个动机。对于人类的视觉感知系统而言，<strong>时间信息</strong>在<strong>推理物体的运动状态和识别被遮挡的物体</strong>方面起着至关重要的作用，许多视觉领域的工作已经证明了使用视频数据的有效性。然而，现有基于多摄像头的3D目标检测算法很少利用时间信息，在自动驾驶任务中，场景物体变化很快，简单地叠加跨时间戳的BEV特征会带来额外的计算成本和干扰信息。受递归神经网络（RNN）的启发，作者<strong>利用BEV特征递归地传递从过去到现在的时间信息</strong>，这与RNN模型的隐藏状态具有相同的思想。</p>
<p>&emsp;&emsp;综上所述，作者提出了一种基于Transformer的BEV编码器，称为BEVFormer，它可以有效地<strong>聚合来自多视图相机的时空特征和历史BEV特征</strong>，由BEVFormer生成的BEV特征可以支持多种3D感知任务，如3D目标检测、地图分割等等。算法包括三个关键的设计：①<strong>网格状BEV查询向量</strong>（grid-shaped BEV queries），功能类似tokens，通过注意力机制灵活地融合时间和空间信息（查询向量为一组可学习的参数）；②<strong>空间交叉注意力模块</strong>，用于从多个相机图像中聚合空间特征；③<strong>时间自注意力模块</strong>，从历史BEV特征中提取时间信息，有利于运动目标的速度估计和严重遮挡物体的目标检测。借助BEVFormer生成的统一特征，该模型可以与不同的任务头协作，从而完成各种端到端的环境感知任务。</p>
<h2 id="_3">方法<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>&emsp;&emsp;BEVFormer整体结构如下图所示，共有六层编码器，与传统Transformer结构不同，这里新引入了BEV查询向量、空间交叉注意力和时间自注意力。具体地来说，BEV查询向量是网格状的可学习参数，旨在通过注意力机制从多摄像头视图中查询BEV空间中的特征；空间交叉注意力和时间自注意力用于根据BEV查询来<strong>查找和聚合来自多相机的空间特征、来自历史BEV的时间特征</strong>。</p>
<p><center></p>
<p><img alt="BEVFormer_1" src="../img/BEVFormer_1.jpg" /></p>
<p></center></p>
<p>&emsp;&emsp;推理阶段，在时间步<span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>中，我们将多相机所拍摄的图像传入backbone中（例如ResNet101），获得不同相机视角下的图像特征<span class="arithmatex"><span class="MathJax_Preview">F_t=\{F^i_t\}^{N_{view}}_{i=1}</span><script type="math/tex">F_t=\{F^i_t\}^{N_{view}}_{i=1}</script></span>，其中<span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>和<span class="arithmatex"><span class="MathJax_Preview">N_{view}</span><script type="math/tex">N_{view}</script></span>分别表示相机序号和相机个数，同时，我们保留了前一时间戳<span class="arithmatex"><span class="MathJax_Preview">t-1</span><script type="math/tex">t-1</script></span>的BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>作为<strong>图像先验</strong>，在每个编码器层，我们首先使用BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>，通过时间自注意力从<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>中查询时间信息，之后使用BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>，通过空间交叉注意力从多个相机特征<span class="arithmatex"><span class="MathJax_Preview">F_t</span><script type="math/tex">F_t</script></span>中查询空间信息，最后传入前馈网络，输出细化后的BEV特征，作为下一编码器层的输入。经过6层编码器的叠加运算，BEV查询向量会经过<strong>时空信息的交替优化表示</strong>，最终会生成当前时间戳<span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>下统一的BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_t</span><script type="math/tex">B_t</script></span>，以BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_t</span><script type="math/tex">B_t</script></span>作为输入，3D检测头和地图分割头可以对3D边界框和地图等感知结果进行预测。</p>
<p>注：两次注意力均以BEV查询向量为中心，融合历史BEV特征和多个视角的图像特征。</p>
<h3 id="bev">BEV查询向量<a class="headerlink" href="#bev" title="Permanent link">&para;</a></h3>
<p>&emsp;&emsp;作者首先预定义了一组网格型可学习的参数<span class="arithmatex"><span class="MathJax_Preview">Q\in R^{H\times W\times C}</span><script type="math/tex">Q\in R^{H\times W\times C}</script></span>作为BEVFormer的查询向量，其中<span class="arithmatex"><span class="MathJax_Preview">H,W</span><script type="math/tex">H,W</script></span>为BEV平面的空间形状，具体地来说，位于<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>中<span class="arithmatex"><span class="MathJax_Preview">p=(x,y)</span><script type="math/tex">p=(x,y)</script></span>的查询向量<span class="arithmatex"><span class="MathJax_Preview">Q_p\in R^{1\times C}</span><script type="math/tex">Q_p\in R^{1\times C}</script></span>负责表示BEV平面中相应的网格单元区域，BEV平面中的每个网格单元对应于实际尺寸的<span class="arithmatex"><span class="MathJax_Preview">s</span><script type="math/tex">s</script></span>米，在默认情况下，<strong>BEV特征的中心对应于汽车的位置</strong>。将BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>输入到BEVFormer之前，为其添加了可学习的位置编码。</p>
<h3 id="_4">空间交叉注意力<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>&emsp;&emsp;由于多相机3D感知任务通常需要输入多组分辨率很高的图片，传统的Transformer多头注意力机制需要消耗很大的计算量，因此，这里作者采样可变形注意力模块（具体可见<a href="../../../transformer/DeDETR/">DeDETR</a>）来实现空间上的交叉注意力，这是一种高效的注意力层，其中<strong>每个BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>仅与相机视图中感兴趣的区域交互</strong>（只利用有限个采样点计算注意力），然而，可变形注意力最初是为2D感知设计的，因此需要对3D场景进行一些调整。</p>
<p>&emsp;&emsp;空间交叉注意力的计算过程如下图所示：</p>
<p><center></p>
<p><img alt="BEVFormer_2" src="../img/BEVFormer_2.jpg" /></p>
<p></center></p>
<p>&emsp;&emsp;首先将BEV平面上的每个查询提升为柱状查询，从柱状查询中采样<span class="arithmatex"><span class="MathJax_Preview">N_{ref}</span><script type="math/tex">N_{ref}</script></span>个3D参考点，之后将这些点投影到2D视图中，对于一个BEV查询，投影的2D点并不会落在（击中）所有视图上，例如下图<span class="arithmatex"><span class="MathJax_Preview">(x',y')</span><script type="math/tex">(x',y')</script></span>只落在了右侧两个视图上，即单个BEV查询向量并不会与所有视图都有对应关系，这里我们称被击中的视图为<span class="arithmatex"><span class="MathJax_Preview">V_{hit}</span><script type="math/tex">V_{hit}</script></span>，之后，我们将这些2D点作为查询向量<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>的参考点，并<strong>从这些参考点周围的命中视图<span class="arithmatex"><span class="MathJax_Preview">V_{hit}</span><script type="math/tex">V_{hit}</script></span>中采样特征，最后，对所采样的特征进行加权求和（添加注意力权重），作为空间交叉注意力的输出</strong>，整个过程可以表示为：
<div><span class="MathJax_Preview">$$
SCA(Q_p,F_t)=\frac{1}{|V_{hit}|}\sum_{i\in V_{hit}}\sum^{N_{ref}}_{j=1}DeformAttn(Q_p,P(p,i,j),F^i_t)
$$</span><script type="math/tex; mode=display">
SCA(Q_p,F_t)=\frac{1}{|V_{hit}|}\sum_{i\in V_{hit}}\sum^{N_{ref}}_{j=1}DeformAttn(Q_p,P(p,i,j),F^i_t)
</script>
</div>
其中<span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>表示相机视角的索引，<span class="arithmatex"><span class="MathJax_Preview">j</span><script type="math/tex">j</script></span>表示参考点索引，<span class="arithmatex"><span class="MathJax_Preview">N_{ref}</span><script type="math/tex">N_{ref}</script></span>表示每个BEV查询向量中参考点的总数（也就是上述柱状图的高度），<span class="arithmatex"><span class="MathJax_Preview">F_t^i</span><script type="math/tex">F_t^i</script></span>表示第<span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>个相机视角的特征，对于每个BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>，作者使用一个函数<span class="arithmatex"><span class="MathJax_Preview">P(p,i,j)</span><script type="math/tex">P(p,i,j)</script></span>得到第<span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>张视图上的第<span class="arithmatex"><span class="MathJax_Preview">j</span><script type="math/tex">j</script></span>个参考点，也就是得到<strong>每个查询向量与特征点的对应关系</strong>。</p>
<p>&emsp;&emsp;核心问题转变为了如何得到函数<span class="arithmatex"><span class="MathJax_Preview">P</span><script type="math/tex">P</script></span>，即如何<strong>得到每个视图上对应的参考点</strong>。BEV特征本质上来说就是俯视视角下的地图特征，每个像素点在真实世界中都有对应关系，因此，可以将其视为一个个真实世界中的点（即点云数据），利用旋转矩阵，将现实坐标系（点云系）中3D坐标数据转为图像坐标系下的坐标。</p>
<p>&emsp;&emsp;首先计算位于<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>的<span class="arithmatex"><span class="MathJax_Preview">p=(x,y)</span><script type="math/tex">p=(x,y)</script></span>点处的查询向量<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>对应真实世界，首先计算<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>的<span class="arithmatex"><span class="MathJax_Preview">p=(x,y)</span><script type="math/tex">p=(x,y)</script></span>处的查询向量<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>对应真实世界的位置<span class="arithmatex"><span class="MathJax_Preview">(x',y')</span><script type="math/tex">(x',y')</script></span>：
<div><span class="MathJax_Preview">$$
x'=(x-\frac W2)\times s,y'=(y-\frac H2)\times s
$$</span><script type="math/tex; mode=display">
x'=(x-\frac W2)\times s,y'=(y-\frac H2)\times s
</script>
</div>
其中<span class="arithmatex"><span class="MathJax_Preview">H,W</span><script type="math/tex">H,W</script></span>表示BEV向量的空间尺寸，<span class="arithmatex"><span class="MathJax_Preview">s</span><script type="math/tex">s</script></span>表示BEV网格的分辨率大小，即单位网格大小与现实世界的比例尺寸，<span class="arithmatex"><span class="MathJax_Preview">(x',y')</span><script type="math/tex">(x',y')</script></span>为<strong>车辆坐标系</strong>下的坐标（车体在原点位置），在3D空间中，位于<span class="arithmatex"><span class="MathJax_Preview">(x_0,y_0)</span><script type="math/tex">(x_0,y_0)</script></span>的物体在<span class="arithmatex"><span class="MathJax_Preview">z</span><script type="math/tex">z</script></span>轴上也具有一定的高度，假设为<span class="arithmatex"><span class="MathJax_Preview">z'</span><script type="math/tex">z'</script></span>，所以作者预先定义了一组锚点高度<span class="arithmatex"><span class="MathJax_Preview">\{z_j'\}^{N_{ref}}_{j=1}</span><script type="math/tex">\{z_j'\}^{N_{ref}}_{j=1}</script></span>，从而确保算法可以捕捉到出现在不同高度的线索（即表现物体的不同高度）。这样，对于每一个查询向量<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>，我们都可以得到一个柱状的<strong>三维参考点<span class="arithmatex"><span class="MathJax_Preview">(x',y',z'_j)^{N_{ref}}_{j=1}</span><script type="math/tex">(x',y',z'_j)^{N_{ref}}_{j=1}</script></span>（现实世界中的坐标点），最后，通过相机的投影矩阵（即内参），将三维参考点投影到不同的图像视图中</strong>，可以写成：
<div><span class="MathJax_Preview">$$
P(p,i,j)=(x_{ij},y_{ij})\\
其中，z_{ij}\cdot[x_{ij} \quad y_{ij} \quad 1]^T=T_i\cdot[x' \quad y' \quad z_j' \quad 1]^T
$$</span><script type="math/tex; mode=display">
P(p,i,j)=(x_{ij},y_{ij})\\
其中，z_{ij}\cdot[x_{ij} \quad y_{ij} \quad 1]^T=T_i\cdot[x' \quad y' \quad z_j' \quad 1]^T
</script>
</div>
其中，<span class="arithmatex"><span class="MathJax_Preview">P(p,i,j)</span><script type="math/tex">P(p,i,j)</script></span>是从第<span class="arithmatex"><span class="MathJax_Preview">j</span><script type="math/tex">j</script></span>个3D点<span class="arithmatex"><span class="MathJax_Preview">(x',y',z'_j)</span><script type="math/tex">(x',y',z'_j)</script></span>投影出来的第<span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>个视图上的2D点，<span class="arithmatex"><span class="MathJax_Preview">T_i\in R^{3\times4}</span><script type="math/tex">T_i\in R^{3\times4}</script></span>是第<span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>个相机的投影矩阵（即相机内参）。</p>
<p>注意：</p>
<ul>
<li>2D到BEV的投影是靠相机内参实现的，<strong>通过点云数据可以获得物体的三维坐标，可以利用相机内参来进一步实现三维相机坐标系到二维图像坐标系的映射</strong>，<strong>映射点就视为参考坐标点，利用可变形注意力模块，在参考点周围选择一些点来实现注意力的运算</strong>（通过偏移操作实现）；</li>
<li>对于BEV上位置为<span class="arithmatex"><span class="MathJax_Preview">(x,y)</span><script type="math/tex">(x,y)</script></span>的查询向量<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>，会对应多个视图上的击中点，每个击中点会在坐标<span class="arithmatex"><span class="MathJax_Preview">(x,y)</span><script type="math/tex">(x,y)</script></span>的基础上预设<span class="arithmatex"><span class="MathJax_Preview">N_{ref}</span><script type="math/tex">N_{ref}</script></span>个高度锚点，用于定位真实世界中物体的高度，获得<strong>高度信息</strong>（<strong>只有利用三维坐标数据<span class="arithmatex"><span class="MathJax_Preview">(x,y,z)</span><script type="math/tex">(x,y,z)</script></span>才能将三维物体投影到二维平面上</strong>），投影到二维平面上的点称为参考点，利用参考点来计算可变形注意力，最后再<strong>沿<span class="arithmatex"><span class="MathJax_Preview">z</span><script type="math/tex">z</script></span>轴、视图方向相加，得到当前位置<span class="arithmatex"><span class="MathJax_Preview">(x,y)</span><script type="math/tex">(x,y)</script></span>上最终的查询特征<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span></strong>；（一张图上的点，只能映射到z轴上的一个点，但是z轴上的某个点，可能会接受来自多个视图的映射）</li>
</ul>
<h3 id="_5">时间自注意力<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>&emsp;&emsp;除了空间信息之外，<strong>时间信息对于视觉系统理解周围环境也至关重要</strong>，例如在没有时间线索的情况下推断移动物体的速度或从静态图像中检测高度遮挡的物体是难以实现的，为了解决这一问题，作者设计了时间自注意力模块，它可以通过结合历史BEV特征来表示当前环境。</p>
<p>&emsp;&emsp;给定一个在时间戳<span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>下的BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>和在时间戳<span class="arithmatex"><span class="MathJax_Preview">t-1</span><script type="math/tex">t-1</script></span>下的历史BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>，由于两个特征的时间戳不一致，车体的位置可能会发生变化，因此对应的BEV鸟瞰图也不一定致，对此，<strong>首先根据车体的运动将<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>与<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>对齐</strong>，<strong>使得同一网格可以对应现实世界相同的位置</strong>，在这里，我们将对其后的历史BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>表示为<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}'</span><script type="math/tex">B_{t-1}'</script></span>。还有一个问题，从<span class="arithmatex"><span class="MathJax_Preview">t-1</span><script type="math/tex">t-1</script></span>到<span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>时刻，不同的物体在现实世界中会以不同的偏移量移动，<strong>在不同时间戳之间构建相同目标BEV特征之间的关联</strong>是非常难的。对此，作者通过时间自注意力层对特征之间的这种时间关联进行建模：
<div><span class="MathJax_Preview">$$
TSA(Q_p,\{Q,B_{t-1}'\})=\sum_{V\in\{Q,B_{t-1}'\}}DeformAttn(Q_p,p,V)
$$</span><script type="math/tex; mode=display">
TSA(Q_p,\{Q,B_{t-1}'\})=\sum_{V\in\{Q,B_{t-1}'\}}DeformAttn(Q_p,p,V)
</script>
</div>
其中，<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>表示在点<span class="arithmatex"><span class="MathJax_Preview">p=(x,y)</span><script type="math/tex">p=(x,y)</script></span>处的BEV特征。此外，与普通的可变形注意力不同，时间自注意力的偏移量<span class="arithmatex"><span class="MathJax_Preview">\Delta p</span><script type="math/tex">\Delta p</script></span>是通过预测“<strong>查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>和历史BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}'</span><script type="math/tex">B_{t-1}'</script></span>的合并</strong>”实现。特别地，对于每个序列的第一个样本，将时间自注意力退化为不含时间信息的自注意力模块，即用<span class="arithmatex"><span class="MathJax_Preview">\{Q,Q\}</span><script type="math/tex">\{Q,Q\}</script></span>来代替<span class="arithmatex"><span class="MathJax_Preview">\{Q,B_{t-1}'\}</span><script type="math/tex">\{Q,B_{t-1}'\}</script></span>。</p>
<p>&emsp;&emsp;与简单地叠加BEV相比，作者提出的时间自注意力模块可以有效地<strong>对长时间依赖建模</strong>，即使相隔很远，两帧之间的信息可以有效地<strong>通过<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}'</span><script type="math/tex">B_{t-1}'</script></span>传递下去</strong>。同时，BEVFormer仅从前一帧的BEV特征中提取时间信息，并没有叠加很多帧的BEV特征，因此产生较少的计算成本和较少的干扰信息。</p>
<blockquote>
<p>问题记录：如何对齐Bt-1与Q？源码中用到了shift偏移量，现实中该如何测得这一变量？</p>
</blockquote>
<h3 id="bev_1">BEV特征的应用<a class="headerlink" href="#bev_1" title="Permanent link">&para;</a></h3>
<p>&emsp;&emsp;BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_t\in R^{H\times W\times C}</span><script type="math/tex">B_t\in R^{H\times W\times C}</script></span>是一个通用的2D特征图：</p>
<p><strong>3D目标检测</strong>：作者基于2D检测器Deformable DETR设计了一款端到端的三维检测头，使用单尺度BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_t</span><script type="math/tex">B_t</script></span>作为解码器的输入，直接预测3D边界框和速度，并且仅使用<span class="arithmatex"><span class="MathJax_Preview">L_1</span><script type="math/tex">L_1</script></span>损失来监督3D边界框的回归。注：使用该检测器（Deformable DETR），可以直接实现端到端的3D边界框和速度预测，无需NMS后处理</p>
<p><strong>地图分割</strong>：作者基于2D分割算法Panoptic SegFormer设计了一个地图分割头，基于BEV的地图分割任务和常见的语义分割任务基本相同，作者使用Panoptic SegFormer的掩码解码器和类别固定的查询向量来针对每个语义类别做分割，包括：汽车、车道和可行驶区域等等。</p>
<p><strong>训练阶段</strong></p>
<p>&emsp;&emsp;对于时间戳<span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>的每个样本，作者从过去2秒的连续序列中随机抽取另外3个样本，这种随机抽样策略可以增强自我运动的多样性。将这四个样本的时间戳分别记为<span class="arithmatex"><span class="MathJax_Preview">t-3,t-2,t-1,t</span><script type="math/tex">t-3,t-2,t-1,t</script></span>，前三个时间戳样本按顺序生成<span class="arithmatex"><span class="MathJax_Preview">\{B_{t-3}、B_{t-2}、B_{t-1}\}</span><script type="math/tex">\{B_{t-3}、B_{t-2}、B_{t-1}\}</script></span>，这一过程不计入梯度，对于时间戳<span class="arithmatex"><span class="MathJax_Preview">t-3</span><script type="math/tex">t-3</script></span>的第一个样本，没有先前的BEV特征，利用自注意力代替时间自注意力（即用BEV查询<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>代替历史BEV），在<span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>时刻，模型同时基于多摄像头输入和历史BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>生成当前时刻的BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_t</span><script type="math/tex">B_t</script></span>，使得<span class="arithmatex"><span class="MathJax_Preview">B_t</span><script type="math/tex">B_t</script></span>包含了跨越四个样本的时空线索，最后，将BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_t</span><script type="math/tex">B_t</script></span>输入到检测头和分割头中，并计算相应的损失。</p>
<p><strong>推理阶段</strong></p>
<p>&emsp;&emsp;按时间顺序评估视频序列的每一帧，将前一个时间戳的BEV特征保存下来，用于下一个时间戳BEV特征的计算。</p>
<p>注意：在本文中，BEV特征生成器不需要单独设计损失来训练，我们只需要针对下游任务设计损失来训练网络参数即可。</p>
<p>补充：</p>
<ul>
<li>BEVFormer证明了使用多摄像头输入的时空信息可以显著提高视觉感知模型的性能，时间自注意力模块和空间交叉注意力模块可以准确地估计物体的移动速度，同时可以准确地提升低可见物体的召回率，对构建更安全的自动驾驶系统至关重要；</li>
<li>利用相机的估计方法与利用激光雷达估计的方法在效率上还有一定的差距，利用二维信息去推断三维位置仍具有挑战。</li>
</ul>
<h2 id="_6">实验<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p><strong>实验细节</strong></p>
<p>&emsp;&emsp;默认情况下，使用FPN输出的多尺度特征，大小分别为原图的<span class="arithmatex"><span class="MathJax_Preview">\frac{1}{16}</span><script type="math/tex">\frac{1}{16}</script></span>、<span class="arithmatex"><span class="MathJax_Preview">\frac{1}{32}</span><script type="math/tex">\frac{1}{32}</script></span>、<span class="arithmatex"><span class="MathJax_Preview">\frac{1}{64}</span><script type="math/tex">\frac{1}{64}</script></span>，通道数为256。在nuScenes上的实验中，BEV查询向量的默认大小为<span class="arithmatex"><span class="MathJax_Preview">200\times 200</span><script type="math/tex">200\times 200</script></span>，<span class="arithmatex"><span class="MathJax_Preview">X</span><script type="math/tex">X</script></span>轴和<span class="arithmatex"><span class="MathJax_Preview">Y</span><script type="math/tex">Y</script></span>轴的感知范围为<span class="arithmatex"><span class="MathJax_Preview">[-51.2m,51.2m]</span><script type="math/tex">[-51.2m,51.2m]</script></span>，BEV网格分辨率<span class="arithmatex"><span class="MathJax_Preview">s</span><script type="math/tex">s</script></span>的大小为<span class="arithmatex"><span class="MathJax_Preview">0.512m</span><script type="math/tex">0.512m</script></span>，对BEV查询向量采用了可学习的位置嵌入（即嵌入位置编码），BEV编码器包含6个编码器层，递归改进每层中的BEV查询向量，每个编码器层输入的历史BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>都是相同的，不需要计算梯度。对于每个局部查询<span class="arithmatex"><span class="MathJax_Preview">Q_p</span><script type="math/tex">Q_p</script></span>，在可变形注意力机制实现的空间交叉注意力中，都会对应三维空间中<span class="arithmatex"><span class="MathJax_Preview">N_{ref}=4</span><script type="math/tex">N_{ref}=4</script></span>个不同高度的点，在<span class="arithmatex"><span class="MathJax_Preview">-5m\sim3m</span><script type="math/tex">-5m\sim3m</script></span>范围内均匀采样预定义高度的锚点，对于2D视图特征上的每个参考点，我们在每个头部的参考点周围使用4个采样点，默认情况下，总共训练24个epoch，学习率设为<span class="arithmatex"><span class="MathJax_Preview">2\times 10^{-4}</span><script type="math/tex">2\times 10^{-4}</script></span>。</p>
<blockquote>
<p>z轴表示的高度为什么要从负数开始，而且还要从-5开始？是因为相机在车顶，相对于地面来说，水平面变高的缘故么。</p>
</blockquote>
<h3 id="_7">可视化图<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>&emsp;&emsp;BEVFormer-S表示引入了时间自注意力模块，从对比图中可以发现，引入时间自注意力模块之后，算法可以很好地检测遮挡较大的物体。</p>
<p><center></p>
<p><img alt="BEVFormer_3" src="../img/BEVFormer_3.jpg" /></p>
<p></center></p>
<p>&emsp;&emsp;地图分割可视化：</p>
<p><center></p>
<p><img alt="BEVFormer_4" src="../img/BEVFormer_4.jpg" /></p>
<p></center></p>
<h2 id="_8">源码笔记<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<h3 id="_9">流程<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p><strong>核心模块：</strong></p>
<ul>
<li>时间自注意力：q为BEV查询向量、kv均为历史BEV特征，用于根据BEV历史特征得到查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>，以BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>为中心，融合历史BEV特征；</li>
<li>空间交叉注意力：时间自注意力输出的结果，可以看成BEV查询向量，kv均表示图像特征，用于根据图像特征得到BEV特征，以BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>为中心，融合对应的图像特征（融合过程中通过相机内参，引入<strong>BEV与图像像素点的位置关系先验</strong>）；</li>
<li>BEV解码模块（下游任务）：q为物体查询向量，v为BEV特征，以物体查询向量q为中心，融合对应的BEV特征</li>
</ul>
<p>注：</p>
<ul>
<li>空间交叉注意力中的关系先验，是将三维的BEV特征依次投影到二维的图像上（与点云向图像投影类似）。时间自注意力上，参考点在BEV二维平面上建立，空间交叉注意力上，参考点在BEV三维空间中建立。</li>
<li>图像不能直接投影到点云上，但点云可以投影到图像上，注意逻辑关系；</li>
<li>时间自注意力和空间交叉注意力共同构成BEV编码模块，BEVFormer默认由6个编码模块构成，在BEV编码的过程中，BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>不断做更新，迭代优化，历史BEV特征和图像特征不做更新，最后编码得到的BEV查询向量即为当前时间戳下的BEV特征。</li>
</ul>
<p><strong>backbone模块</strong></p>
<ul>
<li>将图片序列依次传入ResNet网络中，得到后三个层级的特征图，</li>
<li>将其传入FPN模块中，构建横向连接结构，提升模型的多尺度特征表示能力，通道数统一变为256，并且将最后一个层级的特征传入步长为2的卷积，做下采样，总共会得到4个层级的特征图；</li>
</ul>
<p>注：这里并不需要对每个图像引入位置编码，因为图像只利用CNN提取特征，并没有经过TF编码器提取特征。并且因为这里没有用TF编码器，因此层级间的图像序列无法建模，需要用FPN来加强浅层与深层特征的联系，要和DeDETR做好区分。</p>
<p><strong>BEVFormer</strong></p>
<ul>
<li>预设一组BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>和BEV位置编码向量，尺寸均为<span class="arithmatex"><span class="MathJax_Preview">[w_{bev}*h_{bev}, 256]</span><script type="math/tex">[w_{bev}*h_{bev}, 256]</script></span>，其中查询向量为可学习的参数，位置编码向量为预设好的参数；</li>
<li>预设一组相机序号编码和特征层级编码，尺寸分别为<span class="arithmatex"><span class="MathJax_Preview">[n_{cam},256]</span><script type="math/tex">[n_{cam},256]</script></span>和<span class="arithmatex"><span class="MathJax_Preview">[4,256]</span><script type="math/tex">[4,256]</script></span>，均为可学习的参数，之后将图像特征沿长宽方向拉直，变为特征序列，并且添加预设好的相机序号编码与特征层编码；</li>
<li>将18维度的CAN总线信号映射成256维度，添加到BEV查询向量中；</li>
<li>利用CAN总线数据计算shift偏移量，用于表示车辆在BEV图中的偏移量；</li>
</ul>
<p><strong>时间自注意力模块</strong></p>
<ul>
<li>在BEV二维俯视平面上，设置一组参考点，参考点的数量与BEV特征数量一样（可以视为网格点），尺寸为<span class="arithmatex"><span class="MathJax_Preview">[w_{bev}*h_{bev}, 2]</span><script type="math/tex">[w_{bev}*h_{bev}, 2]</script></span>，数值从0到1，等间距增大，</li>
<li>预设好之后，与前面计算的shift偏移量相加，得到偏移二维参考点坐标；</li>
<li>在自注意力模块中，应用可变形注意力运算，将BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>与BEV位置编码相加，之后与历史BEV特征堆叠，充当为q，将查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>与历史BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>堆叠，充当为v。将q传入线性映射层，分别得到参考点的偏移量和注意力权重，之后将v、采样点、注意力权重传入可变形注意力模块，计算可变形注意力。</li>
</ul>
<p>注：BEV查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>同时对历史BEV特征<span class="arithmatex"><span class="MathJax_Preview">B_{t-1}</span><script type="math/tex">B_{t-1}</script></span>和自身<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>同时做注意力运算，从两组特征上做投影，之后有个求均值操作。（是怎么实现的，细节部分还需要再学习一下）。</p>
<p><strong>空间自注意力模块</strong></p>
<ul>
<li>在BEV三维空间上，设置一组参考点，用于表示BEV特征在现实世界中的位置坐标，参考点的数量</li>
<li>将预设好的参考点依次投影到图像平面中，3D坐标转换为图像坐标，对于每个相机，筛选出相机视野内的BEV特征。先将坐标点转为真实世界中的坐标数据（之前设置的是归一化后的相对坐标），相当于在真实世界中建立3D的网格，以数据集nuScenes为例，长宽范围均为<span class="arithmatex"><span class="MathJax_Preview">[-51.2m,51.2m]</span><script type="math/tex">[-51.2m,51.2m]</script></span>，高度范围（z轴）为<span class="arithmatex"><span class="MathJax_Preview">[-5m,3m]</span><script type="math/tex">[-5m,3m]</script></span>；此时可以将参考点看成点云坐标数据，让坐标数据与旋转矩阵做乘法，转为图像坐标系下的数据，之后根据是否越界，对每个坐标打上mask标签；</li>
</ul>
<p>注：一个BEV参考点坐标数据会生成多个图像坐标系下的数据（每个相机一个），没越界的坐标说明在相机视野内，即当前点的BEV特征会与当前图像的该坐标点下有对应关系，可以用注意力机制做运算，提取有用的特征。</p>
<ul>
<li>在交叉注意力模块中，q为BEV查询向量，kv为图像特征。对于每张图像，先通过参考点的mask标签，找出与之对应的BEV查询向量特征点，将这些BEV查询特征与对应的参考点坐标提出来，单独计算可变形注意力，以nuScenes为例，每个batch会对应6组kv数据。同时也对应6组q数据，依次计算可变形注意力，计算完可变形注意力后，将得到的数据赋值回去（从BEV查询向量中哪拆出来的，就再放哪回去）。</li>
</ul>
<p>注：</p>
<ul>
<li>对于BEV查询向量上的每个特征点，可以视为一个柱状，上面有四个坐标，图像上的像素在与BEV特征做关联时，可能会关联到四个坐标中的任意一个（注意，最多只能关联到一个，即4选1，因为现实世界中的物体，高度数值是唯一的），只要有一个坐标能够映射到图像上的该像素点，则我们认为BEV查询向量中的该特征点可以与该图像特征建立联系，可以进一步计算注意力；</li>
<li>注意这种逻辑关系：在做BEV查询向量与图像特征之间的映射时，查询向量先建立三维网格点（与现实世界中的三维坐标点相对应，类似于构造基于BEV的“点云”数据），之后通过旋转矩阵，将坐标点映射到每个图像上去，映射到的坐标点就可以视为参考点，后续再通过q预测偏移量，进一步计算采样点，<strong>本质上来说，注意力操作就是在图像特征上采样，之后加权回BEV特征</strong>。</li>
<li>之所以要沿相机方向做拆分，就是为了让每个相机图片只与相应的BEV查询向量做交互，大大减少GPU的运算量。</li>
</ul>
<p><strong>解码模块</strong>（这里与一般的解码模块类似，如DeDETR）</p>
<ul>
<li>预设一组物体查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>、初始的解码特征tgt（二者类似，数据均为可学习的参数，尺寸均为[查询个数、特征维度]），将查询向量传入线性映射层，映射为3个数，表示边界框参考点坐标，参考点坐标数据的尺寸为[查询个数, 3]（后续再复制4倍，每个物体查询采样4个点），这里计算参考点也是为了后续在解码过程中，引入可变形注意力运算；</li>
<li>计算交叉注意力（可变形注意力运算），其中q为解码特征tgt与查询向量<span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span>相加，尺寸为[查询个数,特征维度]，k为边界框参考点坐标，尺寸为[查询个数,4,2]（选取前两个坐标，以俯视的视角来看），v为BEV特征，尺寸为<span class="arithmatex"><span class="MathJax_Preview">[w_{bev}*h_{bev}, 256]</span><script type="math/tex">[w_{bev}*h_{bev}, 256]</script></span>。q先经过两次线性映射，得到参考点的偏移量和注意力权重，偏移量与参考点坐标相加，得到采样点，之后将v、采样点、注意力权重传入可变形注意力模块，计算注意力；</li>
<li>将解码特征传入预测头，利用256个特征数据预测边界框和类别，具体思想跟DETR类似。</li>
</ul>
<p><strong>训练阶段</strong></p>
<ul>
<li>计算损失阶段待定；</li>
</ul>
<blockquote>
<p>注：以上仅是笔者个人见解，若有问题，欢迎指正。</p>
</blockquote>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
        <script src="../../../mathjax-config.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
      
        <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
      
    
  </body>
</html>